import{j as e,r as o,d as i}from"./index-EZVcE4NK.js";import{C as c}from"./Card-CUfzvBst.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";const x=n=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...n,children:e.jsx("path",{d:"M12 2L9 9l-7 1 5 5-2 7 7-4 7 4-2-7 5-5-7-1z"})}),m=({user:n,allContent:r})=>{const a=o.useMemo(()=>n.progress?Object.entries(n.progress).map(([t,s])=>{if(s.status==="completed"&&typeof s.score=="number"){const l=r.find(d=>d.id===parseInt(t));if(l&&[i.QUIZ,i.VIDEO_QUIZ,i.CYBER_SECURITY_TRAINING].includes(l.type))return{id:l.id,title:l.title,score:s.score,passingScore:l.passing_score??70}}return null}).filter(t=>t!==null):[],[n.progress,r]);return a.length===0?null:e.jsxs(c,{className:"lg:col-span-3",children:[e.jsx("h2",{className:"text-xl font-bold mb-6 text-text-main",children:"My Quiz Performance"}),e.jsx("div",{className:"space-y-6",children:a.map(t=>{const s=t.score>=t.passingScore;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-text-main font-medium truncate pr-4",children:t.title}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${s?"bg-green-800 text-green-200":"bg-red-900 text-red-200"}`,children:s?"Passed":"Failed"}),e.jsxs("span",{className:"text-text-main font-semibold w-12 text-right",children:[t.score,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2",children:e.jsx("div",{className:"bg-amber-500 h-2 rounded-full",style:{width:`${t.score}%`}})})]},t.id)})})]})},g=({user:n,allContent:r})=>{const t=[{id:"Course Conqueror",name:"Course Conqueror",description:"Complete 5 courses",icon:e.jsx(x,{className:"w-16 h-16 text-yellow-400"})}].filter(s=>{var l;return(l=n.badges)==null?void 0:l.includes(s.id)});return e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"My Activity"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(c,{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-sidebar-accent rounded-lg",children:[e.jsx("span",{className:"font-semibold text-text-main",children:"Points Earned"}),e.jsx("span",{className:"font-bold text-2xl text-highlight",children:n.points||0})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-sidebar-accent rounded-lg",children:[e.jsx("span",{className:"font-semibold text-text-main",children:"Courses Completed"}),e.jsx("span",{className:"font-bold text-2xl text-highlight",children:Object.values(n.progress||{}).filter(s=>s.status==="completed").length})]})]})]}),e.jsxs(c,{className:"lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Badges"}),e.jsx("div",{className:"flex flex-wrap gap-6",children:t.length>0?t.map(s=>e.jsxs("div",{className:"text-center",children:[s.icon,e.jsx("p",{className:"font-semibold mt-2",children:s.name}),e.jsx("p",{className:"text-xs text-text-secondary",children:s.description})]},s.id)):e.jsx("p",{className:"text-text-secondary",children:"No badges earned yet. Keep learning to unlock them!"})})]}),e.jsx(m,{user:n,allContent:r})]})]})};export{g as default};
