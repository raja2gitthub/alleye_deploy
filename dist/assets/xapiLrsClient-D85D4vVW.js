const c="https://all-eye.lrs.io/xapi/",a="a0cca7c1-6232-4c22-b5c8-fbd803f1584e",s="3edb879f-215f-4c1e-9bde-40ce04283870",r="Basic "+btoa(a+":"+s);async function l(t){const e=new URLSearchParams;t.agent&&e.append("agent",JSON.stringify({objectType:"Agent",mbox:`mailto:${t.agent.email}`})),t.activity&&e.append("activity",`https://lms.example.com/content/${t.activity.id}`),t.since&&e.append("since",t.since),t.until&&e.append("until",t.until),e.append("limit",(t.limit||1e3).toString()),e.append("ascending","false");const i=`${c}statements?${e.toString()}`;try{const n=await fetch(i,{method:"GET",headers:{"X-Experience-API-Version":"1.0.3","Content-Type":"application/json",Authorization:r}});if(!n.ok){const o=await n.text();throw console.error("Failed to fetch xAPI statements:",n.status,o),new Error(`LRS request failed with status ${n.status}`)}return(await n.json()).statements||[]}catch(n){return console.error("Error fetching from Veracity LRS:",n),[]}}export{l as f};
