import{r as n,j as e,B as p,s as x}from"./index-EZVcE4NK.js";import{C as b}from"./Card-CUfzvBst.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";const w=({user:a,onLogout:f})=>{const[r,g]=n.useState(a.name),[i,c]=n.useState(""),[o,d]=n.useState(!1),[m,u]=n.useState(!1),h=async t=>{t.preventDefault(),d(!0);const l={};if(r!==a.name&&(l.name=r),Object.keys(l).length>0){const{error:s}=await x.from("profiles").update(l).eq("id",a.id);s&&alert("Error updating profile: "+s.message)}if(i){const{error:s}=await x.auth.updateUser({password:i});s&&alert("Error updating password: "+s.message)}(Object.keys(l).length>0||i)&&(alert("Profile updated successfully!"),c("")),d(!1)},j=async()=>{u(!0);try{await f()}catch{u(!1)}};return e.jsxs(b,{className:"max-w-2xl mx-auto animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"My Profile"}),e.jsxs("form",{className:"space-y-4",onSubmit:h,children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("img",{src:a.avatar_url||`https://i.pravatar.cc/150?u=${a.id}`,alt:r,className:"w-24 h-24 rounded-full object-cover"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Name"}),e.jsx("input",{type:"text",value:r,onChange:t=>g(t.target.value),className:"mt-1 form-input",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Email"}),e.jsx("input",{type:"email",value:a.email,className:"mt-1 form-input bg-sidebar-accent",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"New Password"}),e.jsx("input",{type:"password",value:i,onChange:t=>c(t.target.value),placeholder:"Leave blank to keep current password",className:"mt-1 form-input"})]}),e.jsxs("div",{className:"pt-4 flex items-center justify-between",children:[e.jsx(p,{type:"submit",variant:"primary",disabled:o,children:o?"Saving...":"Save Profile"}),e.jsx(p,{type:"button",variant:"danger",onClick:j,disabled:m,children:m?"Logging out...":"Logout"})]})]})]})};export{w as default};
