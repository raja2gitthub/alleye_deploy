const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-NpTqq68c.js","assets/index-EZVcE4NK.js","assets/index-vep1-nmW.css","assets/Card-CUfzvBst.js","assets/ThreatIntelView-agj89pyb.js","assets/LibraryView-BAxIp6vc.js","assets/ContentCard-BmRLGr-5.js","assets/PlaylistsView-BN788WuO.js","assets/ActivityView-yq3GuFuX.js","assets/AnalyticsView-XF7DYnDK.js","assets/xapiLrsClient-D85D4vVW.js","assets/ViewHeader-C_f75zHr.js","assets/DataTable-iWaiuJ_V.js","assets/CategoricalChart-DwX3OCgn.js","assets/RadarChart-KMhvE571.js","assets/ActivePoints-DLfukH-g.js","assets/PolarChart-DFVWZZVg.js","assets/QAView-ClbG8J_G.js","assets/FaqContent-B6x4ljev.js","assets/ProfileView-B22IBV8Y.js"])))=>i.map(i=>d[i]);
import{r as l,j as i,B as Ke,s as O,d as M,b as ut,H as ft,N as ht,C as mt,P as pt,c as gt,A as bt,Q as yt,a as xt,M as vt,S as wt,_ as Y}from"./index-EZVcE4NK.js";import{M as We}from"./Modal-Dywz6qs9.js";import{U as _t}from"./UserProfileDropdown-CtIvH7Ly.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";const N=[];for(let e=0;e<256;++e)N.push((e+256).toString(16).slice(1));function Ct(e,t=0){return(N[e[t+0]]+N[e[t+1]]+N[e[t+2]]+N[e[t+3]]+"-"+N[e[t+4]]+N[e[t+5]]+"-"+N[e[t+6]]+N[e[t+7]]+"-"+N[e[t+8]]+N[e[t+9]]+"-"+N[e[t+10]]+N[e[t+11]]+N[e[t+12]]+N[e[t+13]]+N[e[t+14]]+N[e[t+15]]).toLowerCase()}let Ce;const Et=new Uint8Array(16);function It(){if(!Ce){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ce=crypto.getRandomValues.bind(crypto)}return Ce(Et)}const Nt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Te={randomUUID:Nt};function St(e,t,n){var o;e=e||{};const s=e.random??((o=e.rng)==null?void 0:o.call(e))??It();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Ct(s)}function Tt(e,t,n){return Te.randomUUID&&!e?Te.randomUUID():St(e)}const Rt="https://all-eye.lrs.io/xapi/",At="a0cca7c1-6232-4c22-b5c8-fbd803f1584e",Ot="3edb879f-215f-4c1e-9bde-40ce04283870",jt="Basic "+btoa(At+":"+Ot);let Mt=Tt();const kt=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|Bada|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(e)?"mobile":"desktop"},Lt=()=>{const e=navigator.userAgent;let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:t[1]||""}):n[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?{name:t[1].replace("OPR","Opera"),version:t[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!=null&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})},q=e=>{const t=Lt();return{registration:Mt,platform:"Web",contextActivities:{parent:[{id:`https://lms.example.com/content/${e.id}`}]},extensions:{"https://w3id.org/xapi/acrossx/extensions/device-type":kt(),"https://example.com/xapi/browser-info":{name:t.name,version:t.version}}}},ye=[];let be=!1;async function Ze(){if(be||ye.length===0)return;be=!0;const e=ye.shift();if(!e){be=!1;return}try{const t=await fetch(`${Rt}statements`,{method:"POST",headers:{"X-Experience-API-Version":"1.0.3","Content-Type":"application/json",Authorization:jt},body:JSON.stringify(e)});t.ok||console.error("Failed to send xAPI statement:",t.status,await t.text())}catch(t){console.error("Error sending xAPI statement. Re-queueing.",t),ye.unshift(e)}finally{be=!1,setTimeout(Ze,100)}}function K(e){ye.push(e),Ze()}const W=e=>({mbox:`mailto:${e.email}`,name:e.name,objectType:"Agent"}),re=e=>{const t="author_id"in e,n=t?`Threat Intel Article: ${e.title}`:e.description,s=t?"http://activitystrea.ms/schema/1.0/article":"http://adlnet.gov/expapi/activities/course";return{id:`https://lms.example.com/content/${e.id}`,definition:{name:{"en-US":e.title},description:{"en-US":n},type:s},objectType:"Activity"}};function Xe(e,t){const n={actor:W(e),verb:{id:"http://adlnet.gov/expapi/verbs/launched",display:{"en-US":"launched"}},object:re(t),context:q(t),timestamp:new Date().toISOString()};K(n)}function Ee(e,t,n){const s="passing_score"in t?(t.passing_score??70)/100:.7,o={actor:W(e),verb:{id:"http://adlnet.gov/expapi/verbs/completed",display:{"en-US":"completed"}},object:re(t),result:{completion:!0,success:n!=null&&n.score?n.score.scaled>=s:!0,...n},context:q(t),timestamp:new Date().toISOString()};K(o)}function et(e,t,n){const s={actor:W(e),verb:{id:"http://adlnet.gov/expapi/verbs/paused",display:{"en-US":"paused"}},object:re(t),result:{extensions:{"https://w3id.org/xapi/video/extensions/time":n}},context:q(t),timestamp:new Date().toISOString()};K(s)}function tt(e,t,n){const s={actor:W(e),verb:{id:"http://adlnet.gov/expapi/verbs/resumed",display:{"en-US":"resumed"}},object:re(t),result:{extensions:{"https://w3id.org/xapi/video/extensions/time":n}},context:q(t),timestamp:new Date().toISOString()};K(s)}function Re(e,t,n){const s={actor:W(e),verb:{id:"http://adlnet.gov/expapi/verbs/suspended",display:{"en-US":"suspended"}},object:re(t),result:{duration:n},context:q(t),timestamp:new Date().toISOString()};K(s)}function nt(e,t,n,s,o){const r=parseInt(String(n.correctAnswer),10),a=n.options&&!isNaN(r)&&n.options[r]?n.options[r]:"",c={actor:W(e),verb:{id:"http://adlnet.gov/expapi/verbs/answered",display:{"en-US":"answered"}},object:{id:`https://lms.example.com/content/${t.id}/question/${n.id}`,definition:{name:{"en-US":`Question ${n.id} in ${t.title}`},description:{"en-US":n.question},type:"http://adlnet.gov/expapi/activities/cmi.interaction",interactionType:"choice",correctResponsesPattern:[a],choices:n.options.map(u=>({id:u,description:{"en-US":u}}))},objectType:"Activity"},result:{success:o,response:s},context:q(t),timestamp:new Date().toISOString()};K(c)}function Dt(e,t){const n={actor:W(e),verb:{id:"http://id.tincanapi.com/verb/read",display:{"en-US":"read"}},object:re(t),context:q(t),timestamp:new Date().toISOString()};K(n)}const Ut=e=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",strokeWidth:1.5,stroke:"currentColor",...e,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ae=({questions:e,onComplete:t,user:n,content:s})=>{const[o,r]=l.useState(0),[a,c]=l.useState([]),[u,b]=l.useState(!1),[d,g]=l.useState(0);l.useEffect(()=>{c(new Array(e.length).fill(null))},[e]);const f=E=>{const v=[...a];v[o]=E,c(v);const I=e[o].correctAnswer===E;nt(n,s,e[o],e[o].options[E],I)},m=()=>{o<e.length-1?r(E=>E+1):w()},w=()=>{let E=0;e.forEach((I,D)=>{I.correctAnswer===a[D]&&E++});const v=Math.round(E/e.length*100);g(v),b(!0),t(v)};if(u)return i.jsxs("div",{className:"text-center p-8 bg-sidebar flex flex-col items-center justify-center h-full",children:[i.jsx(Ut,{className:"w-16 h-16 text-green-400 mb-4"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Quiz Complete!"}),i.jsxs("p",{className:"text-5xl font-bold my-4 text-highlight",children:[d,"%"]}),i.jsx("p",{className:"text-text-secondary",children:d>=(s.passing_score??70)?"Congratulations, you passed!":"You did not pass. Please review and try again."})]});if(!e||e.length===0)return i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{children:"No questions available."})});const C=e[o];return i.jsxs("div",{className:"p-6 sm:p-8 bg-sidebar h-full flex flex-col",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 text-text-main",children:["Question ",o+1," of ",e.length]}),i.jsx("div",{className:"text-text-secondary mb-4 prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:C.question}}),i.jsx("div",{className:"space-y-3 my-4 flex-1 overflow-y-auto",children:C.options.map((E,v)=>i.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-colors ${a[o]===v?"bg-primary/20 border-primary":"bg-background border-border hover:border-sidebar-accent"}`,children:[i.jsx("input",{type:"radio",name:`q-${C.id}`,checked:a[o]===v,onChange:()=>f(v),className:"w-5 h-5 accent-primary"}),i.jsx("span",{className:"ml-4 text-text-main",children:E})]},v))}),i.jsx("div",{className:"pt-4 mt-auto",children:i.jsx(Ke,{onClick:m,className:"w-full",variant:"primary",children:o===e.length-1?"Submit":"Next Question"})})]})},st=({text:e})=>i.jsx("h2",{className:"text-4xl font-orbitron text-primary-green","data-text":e,children:e}),Pt=({onComplete:e})=>{const[t,n]=l.useState(3),s=l.useRef(null);l.useEffect(()=>{s.current=new Audio("https://ryzfriykqluohxvulezu.supabase.co/storage/v1/object/sign/sounds/Count%20Down%201.mp3?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNzkxNDFjNy1hZTc1LTQ2ZmQtYmZjOS1iNGE2OGNhZDExNTgiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzb3VuZHMvQ291bnQgRG93biAxLm1wMyIsImlhdCI6MTc1ODYyMDEzNywiZXhwIjoxNzkwMTU2MTM3fQ.W4hNo-vv_d3dfURtiCqlBC5oYMYkp5wn_sPkCxdRJTY"),s.current.volume=.7},[]),l.useEffect(()=>{var r;if(t>0){(r=s.current)==null||r.play().catch(c=>console.error("Audio play failed:",c));const a=setTimeout(()=>n(t-1),1e3);return()=>clearTimeout(a)}else e()},[t,e]);const o=()=>t<=1?"border-red-500 text-red-500 shadow-red-500/50":t<=2?"border-yellow-500 text-yellow-500 shadow-yellow-500/50":"border-primary-green text-primary-green shadow-primary-green/50";return i.jsx("div",{className:"fixed inset-0 bg-background-dark/95 flex flex-col justify-center items-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"font-orbitron text-primary-green text-2xl mb-4","data-text":"Your assessment starts in",children:"Your assessment starts in"}),i.jsx("div",{className:`font-tech-mono text-7xl p-4 border-2 rounded-lg shadow-lg animate-pulseCountdown ${o()}`,children:t})]})})},Gt=({onComplete:e,questions:t,user:n,content:s})=>{const[o,r]=l.useState(0),[a,c]=l.useState({}),[u,b]=l.useState(20),d=l.useRef(null),g=l.useRef(null),f=l.useRef(null);l.useEffect(()=>(d.current=new Audio("https://ryzfriykqluohxvulezu.supabase.co/storage/v1/object/sign/sounds/bgm.mp3?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNzkxNDFjNy1hZTc1LTQ2ZmQtYmZjOS1iNGE2OGNhZDExNTgiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzb3VuZHMvYmdtLm1wMyIsImlhdCI6MTc1ODYxOTU2MiwiZXhwIjoxNzkwMTU1NTYyfQ.BQciqDvQYpBsSij1I9CpOYzMks01nhHr-chjnLXdXQI"),d.current.loop=!0,d.current.volume=.5,d.current.play().catch(p=>console.error("BGM play failed:",p)),g.current=new Audio("https://ryzfriykqluohxvulezu.supabase.co/storage/v1/object/sign/sounds/Pop%20Move%20Open.wav?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNzkxNDFjNy1hZTc1LTQ2ZmQtYmZjOS1iNGE2OGNhZDExNTgiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzb3VuZHMvUG9wIE1vdmUgT3Blbi53YXYiLCJpYXQiOjE3NTg2MTk2NjcsImV4cCI6MTc5MDE1NTY2N30.9gHhSqLBty5IiWrN9sS_ZhIdrFDQB6ICt4Eau75Qumg"),g.current.volume=.6,()=>{var p;(p=d.current)==null||p.pause(),f.current&&clearInterval(f.current)}),[]);const m=()=>{f.current&&clearInterval(f.current),b(20),f.current=setInterval(()=>{b(p=>p<=1?(w(),0):p-1)},1e3)};l.useEffect(()=>{m()},[o]);const w=()=>{f.current&&clearInterval(f.current),o===t.length-1?I():v()},C=()=>{var p;(p=g.current)==null||p.play().catch(R=>console.error("Click sound failed:",R))},E=p=>{C();const R=t[o],k=parseInt(String(R.correctAnswer),10),G=!isNaN(k)&&p===R.options[k];nt(n,s,R,p,G),c({...a,[o]:p})},v=()=>{C(),r(p=>p+1)},I=()=>{var p;C(),f.current&&clearInterval(f.current),(p=d.current)==null||p.pause(),e(a)},D=t[o],P=()=>u<=5?"border-red-500 text-red-500 shadow-red-500/50 animate-pulseDanger":u<=10?"border-yellow-500 text-yellow-500 shadow-yellow-500/50 animate-pulseWarning":"border-primary-green text-primary-green shadow-primary-green/50 animate-pulseTimer";return i.jsxs("div",{className:"w-full animate-fadeIn",children:[i.jsx(st,{text:"SECURITY ASSESSMENT"}),i.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-3",children:[i.jsx("span",{className:"font-orbitron text-cyber-blue uppercase",children:"Time Remaining:"}),i.jsx("div",{className:`font-tech-mono text-2xl p-2 border-2 rounded-lg shadow-lg transition-all duration-300 ${P()}`,children:u})]}),i.jsx("div",{className:"mt-8 text-left",children:i.jsxs("div",{className:"bg-background-dark border border-cyber-blue p-6 rounded-lg shadow-lg shadow-cyber-blue/30 animate-slideIn",children:[i.jsxs("h3",{className:"font-orbitron text-primary-green text-xl mb-4",children:[o+1,". ",D.question]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.options.map((p,R)=>{const k=a[o]===p;return i.jsx("button",{onClick:()=>E(p),className:`option-button font-tech-mono text-left p-3 border rounded-md transition-all duration-200 hover:bg-cyber-blue/20 hover:border-primary-green hover:-translate-y-1 hover:shadow-lg hover:shadow-cyber-blue/50 ${k?"bg-primary-green/30 border-primary-green shadow-lg shadow-primary-green/40":"bg-background-light border-cyber-blue"}`,children:p},R)})})]})}),i.jsx("div",{className:"mt-8 flex justify-end",children:o<t.length-1?i.jsx("button",{onClick:v,className:"nav-button",children:"Next"}):i.jsx("button",{onClick:I,className:"nav-button",children:"Submit Assessment"})})]})},$t=({userAnswers:e,onRetake:t,questions:n})=>{const s=()=>{const a=new Audio("https://ryzfriykqluohxvulezu.supabase.co/storage/v1/object/sign/sounds/Pop%20Move%20Open.wav?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNzkxNDFjNy1hZTc1LTQ2ZmQtYmZjOS1iNGE2OGNhZDExNTgiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzb3VuZHMvUG9wIE1vdmUgT3Blbi53YXYiLCJpYXQiOjE3NTg2MTk2NjcsImV4cCI6MTc5MDE1NTY2N30.9gHhSqLBty5IiWrN9sS_ZhIdrFDQB6ICt4Eau75Qumg");a.volume=.6,a.play().catch(c=>console.error("Click sound failed:",c))},o=()=>{s(),t()};let r=0;return n.forEach((a,c)=>{const u=parseInt(String(a.correctAnswer),10);!isNaN(u)&&e[c]===a.options[u]&&r++}),i.jsxs("div",{className:"w-full animate-fadeIn",children:[i.jsx(st,{text:"ASSESSMENT REPORT"}),i.jsxs("p",{className:"font-orbitron text-5xl text-primary-green my-6",style:{textShadow:"0 0 10px #00ff00"},children:[r," / ",n.length]}),i.jsx("div",{className:"text-left max-h-[40vh] overflow-y-auto pr-4 border-t-2 border-dashed border-primary-green pt-6 custom-scrollbar",children:n.map((a,c)=>{const u=e[c]||"Time's up - No answer",b=parseInt(String(a.correctAnswer),10),d=!isNaN(b)&&a.options[b]?a.options[b]:"Invalid correct answer",g=u===d;return i.jsxs("div",{className:"mb-6 pb-4 border-b border-cyber-blue/20",children:[i.jsxs("p",{className:"font-bold text-lg mb-2",children:[c+1,". ",a.question]}),i.jsxs("p",{className:"text-primary-green",children:["Correct Answer: ",d]}),i.jsxs("p",{className:`${g?"text-cyber-blue":"text-red-500"}`,children:["Your Answer: ",u]}),!g&&i.jsx("p",{className:"text-red-400 italic mt-1",children:"Incorrect. Review your knowledge."})]},c)})}),i.jsx("button",{onClick:o,className:"nav-button mt-8 mx-auto block",children:"Retake Assessment"})]})},Vt=({videoUrl:e,quizData:t,onComplete:n,onRetake:s,user:o,content:r})=>{const[a,c]=l.useState("video"),[u,b]=l.useState({}),d=l.useRef(null),[g,f]=l.useState(!0),[m,w]=l.useState(0),[C,E]=l.useState(0),[v,I]=l.useState(0),[D,P]=l.useState(!0),p=l.useRef(null),R=l.useRef(0),k=()=>c("countdown"),G=()=>c("quiz"),Z=x=>{b(x),c("results");let j=0;t.forEach((ae,fe)=>{const he=parseInt(String(ae.correctAnswer),10);!isNaN(he)&&x[fe]===ae.options[he]&&j++});const ne=t.length>0?Math.round(j/t.length*100):0;n(ne)},ie=()=>{s(),Xe(o,r),b({}),c("video"),d.current&&(d.current.currentTime=0,d.current.play())};l.useEffect(()=>(a==="video"&&d.current&&d.current.play().catch(x=>console.warn("Autoplay prevented.")),()=>{p.current&&clearTimeout(p.current)}),[a]);const X=()=>{var x;f(!0),R.current>0&&(tt(o,r,((x=d.current)==null?void 0:x.currentTime)||0),R.current=0)},ee=()=>{f(!1);const x=d.current;x&&!x.ended&&x.duration>0&&(R.current=x.currentTime,et(o,r,x.currentTime))},H=()=>{d.current&&(d.current.paused?d.current.play():d.current.pause())},te=()=>{if(d.current){const x=d.current.currentTime,j=d.current.duration;E(x),I(j),j>0&&w(x/j*100)}},B=()=>{d.current&&I(d.current.duration)},F=x=>{if(isNaN(x)||x<0)return"00:00";const j=Math.floor(x/60),ne=Math.floor(x%60);return`${j.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}`},h=()=>{P(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{g&&P(!1)},3e3)},_=x=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...x,children:i.jsx("path",{d:"M8 5v14l11-7z"})}),U=x=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...x,children:i.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),ve=()=>{switch(a){case"video":return i.jsxs("div",{className:"relative w-full max-w-4xl h-full flex items-center justify-center group",onMouseMove:h,children:[i.jsx("video",{ref:d,src:e,onEnded:k,onPlay:X,onPause:ee,onTimeUpdate:te,onLoadedMetadata:B,onClick:H,autoPlay:!0,className:"w-full h-full object-contain cursor-pointer",onContextMenu:x=>x.preventDefault(),controlsList:"nodownload nofullscreen noremoteplayback"},e),i.jsxs("div",{className:`absolute bottom-0 left-0 right-0 p-3 flex items-center gap-4 bg-gradient-to-t from-black/60 to-transparent pointer-events-none transition-opacity duration-300 ${D||!g?"opacity-100":"opacity-0"}`,children:[i.jsx("button",{onClick:H,className:"text-white pointer-events-auto p-1 flex-shrink-0 hover:scale-110 transition-transform",children:g?i.jsx(U,{className:"w-6 h-6"}):i.jsx(_,{className:"w-6 h-6"})}),i.jsx("div",{className:"flex-grow h-1.5 bg-white/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary-green rounded-full",style:{width:`${m}%`}})}),i.jsxs("div",{className:"text-white text-sm font-tech-mono w-16 text-center flex-shrink-0",children:["-",F(v-C)]})]})]});case"countdown":return i.jsx(Pt,{onComplete:G});case"quiz":return i.jsx(Gt,{onComplete:Z,questions:t,user:o,content:r});case"results":return i.jsx($t,{userAnswers:u,onRetake:ie,questions:t});default:return null}};return i.jsxs("div",{className:"w-full h-full text-center flex items-center justify-center bg-background-light p-6 md:p-8 relative",children:[i.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap');
                .font-orbitron { font-family: 'Orbitron', sans-serif; }
                .font-tech-mono { font-family: 'Share Tech Mono', monospace; }
                .text-primary-green { color: #00ff00; }
                .border-primary-green { border-color: #00ff00; }
                .bg-primary-green { background-color: #00ff00; }
                .shadow-primary-green\\/50 { box-shadow: 0 0 15px rgba(0, 255, 0, 0.4); }
                .text-cyber-blue { color: #00aaff; }
                .border-cyber-blue { border-color: #00aaff; }
                .shadow-cyber-blue\\/30 { box-shadow: 0 0 10px rgba(0, 170, 255, 0.3); }
                .shadow-cyber-blue\\/50 { box-shadow: 0 0 10px rgba(0, 170, 255, 0.5); }
                .bg-background-dark { background-color: #1a1a2e; }
                .bg-background-light { background-color: #16213e; }
                .nav-button { background-color: #00aaff; color: #1a1a2e; border: none; padding: 12px 25px; border-radius: 5px; cursor: pointer; font-family: 'Orbitron', sans-serif; font-size: 1em; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 10px rgba(0, 170, 255, 0.5); transition: all 0.3s ease; }
                .nav-button:hover { background-color: #00ff00; box-shadow: 0 0 15px #00ff00; transform: translateY(-2px) scale(1.02); }
                .option-button { position: relative; overflow: hidden; }
                .option-button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent); transition: 0.5s; }
                .option-button:hover::before { left: 100%; }
                .custom-scrollbar::-webkit-scrollbar { width: 8px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: #1a1a2e; border-radius: 4px; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: #00ff00; border-radius: 4px; box-shadow: 0 0 5px rgba(0, 255, 0, 0.7); }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #00aaff; }
                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } .animate-fadeIn { animation: fadeIn 0.7s ease-out; }
                @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } .animate-slideIn { animation: slideIn 0.5s ease-out forwards; }
                @keyframes pulseTimer { 50% { box-shadow: 0 0 25px rgba(0, 255, 0, 0.6), 0 0 35px rgba(0, 255, 0, 0.2); } } .animate-pulseTimer { animation: pulseTimer 2s infinite; }
                @keyframes pulseCountdown { 50% { transform: scale(1.05); } } .animate-pulseCountdown { animation: pulseCountdown 1s infinite; }
                @keyframes pulseWarning { 50% { box-shadow: 0 0 25px rgba(255, 170, 0, 0.8); } } .animate-pulseWarning { animation: pulseWarning 1s infinite; }
                @keyframes pulseDanger { 50% { box-shadow: 0 0 25px rgba(255, 0, 0, 0.8); } } .animate-pulseDanger { animation: pulseDanger 0.5s infinite; }
            `}),ve()]})},Yt=({isOpen:e,onClose:t,content:n,user:s,onProgressUpdate:o})=>{const r=l.useRef(null),a=l.useRef(0),c=l.useRef(0),[u,b]=l.useState(!0),[d,g]=l.useState(0),[f,m]=l.useState(0),[w,C]=l.useState(0),[E,v]=l.useState(!0),I=l.useRef(null);l.useEffect(()=>{e&&n&&(Xe(s,n),a.current=Date.now(),O.from("analytics").insert({user_id:s.id,content_id:n.id,event_type:"start",details:{}}).then());const h=()=>{if(document.hidden&&n&&a.current){const _=`PT${Math.round((Date.now()-a.current)/1e3)}S`;Re(s,n,_),a.current=0}};return document.addEventListener("visibilitychange",h),()=>{if(document.removeEventListener("visibilitychange",h),n&&a.current){const _=`PT${Math.round((Date.now()-a.current)/1e3)}S`;Re(s,n,_),a.current=0}I.current&&clearTimeout(I.current)}},[e,n,s]);const D=()=>{var h;b(!0),n&&c.current>0&&(tt(s,n,((h=r.current)==null?void 0:h.currentTime)||0),c.current=0)},P=()=>{b(!1);const h=r.current;n&&h&&!h.ended&&h.duration>0&&(c.current=h.currentTime,et(s,n,h.currentTime))},p=h=>{n&&(o(n.id,h),Ee(s,n,{score:{scaled:h/100,raw:h,min:0,max:100}}),O.from("analytics").insert({user_id:s.id,content_id:n.id,event_type:"quiz_attempt",details:{score:h}}).then())},R=()=>{var h,_;n&&n.type===M.VIDEO&&(o(n.id),Ee(s,n,{duration:`PT${Math.round(((h=r.current)==null?void 0:h.duration)||0)}S`}),O.from("analytics").insert({user_id:s.id,content_id:n.id,event_type:"complete",details:{watchTime:(_=r.current)==null?void 0:_.duration}}).then())},k=h=>{var _;if(n){o(n.id,h);const U=((_=r.current)==null?void 0:_.duration)||0;Ee(s,n,{score:{scaled:h/100,raw:h},duration:`PT${Math.round(U)}S`}),O.from("analytics").insert({user_id:s.id,content_id:n.id,event_type:"complete",details:{score:h,watchTime:U}}).then(),O.from("cyber_training_analytics").insert({user_id:s.id,user_name:s.name,user_company:s.company||"N/A",content_id:n.id,score:h,video_watch_time:U,attempt:1}).then()}},G=()=>{r.current&&(r.current.paused?r.current.play():r.current.pause())},Z=()=>{if(r.current){const h=r.current.currentTime,_=r.current.duration;m(h),C(_),_>0&&g(h/_*100)}},ie=()=>{r.current&&C(r.current.duration)},X=h=>{if(isNaN(h)||h<0)return"00:00";const _=Math.floor(h/60),U=Math.floor(h%60);return`${_.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`},ee=()=>{v(!0),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{u&&v(!1)},3e3)},H=h=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...h,children:i.jsx("path",{d:"M8 5v14l11-7z"})}),te=h=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...h,children:i.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})});if(!e||!n)return null;const B=()=>{const h=`${n.id}-${n.type}`;switch(n.type){case M.CYBER_SECURITY_TRAINING:const _=typeof n.quiz_data=="string"&&n.quiz_data?JSON.parse(n.quiz_data):[];return i.jsx(Vt,{videoUrl:n.content_url,quizData:_,onComplete:k,onRetake:()=>{},user:s,content:n},h);case M.VIDEO:case M.VIDEO_QUIZ:return i.jsxs("div",{className:"flex flex-col lg:flex-row h-full",children:[i.jsxs("div",{className:"relative flex-1 bg-black flex items-center justify-center group",onMouseMove:ee,children:[i.jsx("video",{ref:r,src:n.content_url,onEnded:R,onPlay:D,onPause:P,onTimeUpdate:Z,onLoadedMetadata:ie,onClick:G,autoPlay:!0,className:"w-full h-full object-contain cursor-pointer"},n.content_url),i.jsxs("div",{className:`absolute inset-0 bg-gradient-to-t from-black/50 to-transparent pointer-events-none transition-opacity duration-300 ${E||!u?"opacity-100":"opacity-0"}`,children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-white/20",children:i.jsx("div",{className:"h-full bg-primary transition-all duration-100",style:{width:`${d}%`}})}),i.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-10",children:[i.jsx("button",{onClick:G,className:"text-white bg-black/50 rounded-full p-4 hover:bg-black/70 transition-colors pointer-events-auto",children:u?i.jsx(te,{className:"w-8 h-8"}):i.jsx(H,{className:"w-8 h-8"})}),i.jsxs("div",{className:"text-white text-lg font-mono bg-black/50 px-3 py-1 rounded",children:["-",X(w-f)]})]})]})]}),n.type===M.VIDEO_QUIZ&&i.jsx("div",{className:"w-full lg:w-96 lg:flex-shrink-0",children:i.jsx(Ae,{questions:n.questions||[],onComplete:p,user:s,content:n})})]});case M.PDF:case M.HTML5:case M.SCORM:case M.REACT_SANDBOX:return i.jsx("iframe",{src:n.embed_url,title:n.title,className:"w-full h-full border-none",sandbox:"allow-scripts allow-same-origin"},n.embed_url);case M.HTML:return i.jsx("div",{className:"p-6 prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:n.html_content||""}});case M.QUIZ:return i.jsx(Ae,{questions:n.questions||[],onComplete:p,user:s,content:n});default:return i.jsx("div",{className:"p-8 text-center",children:i.jsx("p",{children:"Content type not supported yet."})})}},F=n.type===M.CYBER_SECURITY_TRAINING;return i.jsx(We,{isOpen:e,onClose:t,title:n.title,size:F?"2xl":"xl",disableContentPadding:!0,children:i.jsx("div",{className:`aspect-video w-full ${F?"bg-background-dark":"bg-sidebar"}`,children:B()})})},Ht=({isOpen:e,onClose:t,currentUser:n})=>{const[s,o]=l.useState(""),[r,a]=l.useState(!1),c=async u=>{if(u.preventDefault(),!s.trim()){alert("Please enter a question.");return}a(!0);const{error:b}=await O.from("qanda").insert({user_id:n.id,question:s});a(!1),b?alert(`Error submitting question: ${b.message}`):(alert("Your question has been submitted and will be reviewed by an admin."),o(""),t())};return i.jsx(We,{isOpen:e,onClose:t,title:"Ask a Question",children:i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsx("textarea",{value:s,onChange:u=>o(u.target.value),placeholder:"Type your security-related question here...",className:"form-input",rows:5,required:!0,disabled:r}),i.jsx("div",{className:"flex justify-end",children:i.jsx(Ke,{type:"submit",variant:"primary",disabled:r,children:r?"Submitting...":"Submit Question"})})]})})};var Oe;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Oe||(Oe={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(je||(je={}));var Me;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Me||(Me={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke=["user","model","function","system"];var Le;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Le||(Le={}));var De;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(De||(De={}));var Ue;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Ue||(Ue={}));var Pe;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Pe||(Pe={}));var ce;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ce||(ce={}));var Ge;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Ge||(Ge={}));var $e;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})($e||($e={}));var Ve;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Ve||(Ve={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class oe extends T{constructor(t,n){super(t),this.response=n}}class ot extends T{constructor(t,n,s,o){super(t),this.status=n,this.statusText=s,this.errorDetails=o}}class V extends T{}class rt extends T{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="https://generativelanguage.googleapis.com",Ft="v1beta",Qt="0.24.1",zt="genai-js";var J;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(J||(J={}));class Jt{constructor(t,n,s,o,r){this.model=t,this.task=n,this.apiKey=s,this.stream=o,this.requestOptions=r}toString(){var t,n;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Ft;let r=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Bt}/${s}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function qt(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${zt}/${Qt}`),t.join(" ")}async function Kt(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",qt(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let s=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new V(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,r]of s.entries()){if(o==="x-goog-api-key")throw new V(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new V(`Header name ${o} can only be set using the apiClient field`);n.append(o,r)}}return n}async function Wt(e,t,n,s,o,r){const a=new Jt(e,t,n,s,r);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},tn(r)),{method:"POST",headers:await Kt(a),body:o})}}async function ue(e,t,n,s,o,r={},a=fetch){const{url:c,fetchOptions:u}=await Wt(e,t,n,s,o,r);return Zt(c,u,a)}async function Zt(e,t,n=fetch){let s;try{s=await n(e,t)}catch(o){Xt(o,e)}return s.ok||await en(s,e),s}function Xt(e,t){let n=e;throw n.name==="AbortError"?(n=new rt(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof ot||e instanceof V||(n=new T(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function en(e,t){let n="",s;try{const o=await e.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new ot(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,s)}function tn(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const n=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),xe(e.candidates[0]))throw new oe(`${$(e)}`,e);return nn(e)}else if(e.promptFeedback)throw new oe(`Text not available. ${$(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),xe(e.candidates[0]))throw new oe(`${$(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Ye(e)[0]}else if(e.promptFeedback)throw new oe(`Function call not available. ${$(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),xe(e.candidates[0]))throw new oe(`${$(e)}`,e);return Ye(e)}else if(e.promptFeedback)throw new oe(`Function call not available. ${$(e)}`,e)},e}function nn(e){var t,n,s,o;const r=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(o=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)a.text&&r.push(a.text),a.executableCode&&r.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&r.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function Ye(e){var t,n,s,o;const r=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(o=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)a.functionCall&&r.push(a.functionCall);if(r.length>0)return r}const sn=[ce.RECITATION,ce.SAFETY,ce.LANGUAGE];function xe(e){return!!e.finishReason&&sn.includes(e.finishReason)}function $(e){var t,n,s;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((s=e.candidates)===null||s===void 0)&&s[0]){const r=e.candidates[0];xe(r)&&(o+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(o+=`: ${r.finishMessage}`))}return o}function le(e){return this instanceof le?(this.v=e,this):new le(e)}function on(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(e,t||[]),o,r=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(f){s[f]&&(o[f]=function(m){return new Promise(function(w,C){r.push([f,m,w,C])>1||c(f,m)})})}function c(f,m){try{u(s[f](m))}catch(w){g(r[0][3],w)}}function u(f){f.value instanceof le?Promise.resolve(f.value.v).then(b,d):g(r[0][2],f)}function b(f){c("next",f)}function d(f){c("throw",f)}function g(f,m){f(m),r.shift(),r.length&&c(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function rn(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=ln(t),[s,o]=n.tee();return{stream:cn(s),response:an(o)}}async function an(e){const t=[],n=e.getReader();for(;;){const{done:s,value:o}=await n.read();if(s)return Ie(dn(t));t.push(o)}}function cn(e){return on(this,arguments,function*(){const n=e.getReader();for(;;){const{value:s,done:o}=yield le(n.read());if(o)break;yield yield le(Ie(s))}})}function ln(e){const t=e.getReader();return new ReadableStream({start(s){let o="";return r();function r(){return t.read().then(({value:a,done:c})=>{if(c){if(o.trim()){s.error(new T("Failed to parse stream"));return}s.close();return}o+=a;let u=o.match(He),b;for(;u;){try{b=JSON.parse(u[1])}catch{s.error(new T(`Error parsing JSON response: "${u[1]}"`));return}s.enqueue(b),o=o.substring(u[0].length),u=o.match(He)}return r()}).catch(a=>{let c=a;throw c.stack=a.stack,c.name==="AbortError"?c=new rt("Request aborted when reading from the stream"):c=new T("Error reading from the stream"),c})}}})}function dn(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const s of e){if(s.candidates){let o=0;for(const r of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=r.citationMetadata,n.candidates[o].groundingMetadata=r.groundingMetadata,n.candidates[o].finishReason=r.finishReason,n.candidates[o].finishMessage=r.finishMessage,n.candidates[o].safetyRatings=r.safetyRatings,r.content&&r.content.parts){n.candidates[o].content||(n.candidates[o].content={role:r.content.role||"user",parts:[]});const a={};for(const c of r.content.parts)c.text&&(a.text=c.text),c.functionCall&&(a.functionCall=c.functionCall),c.executableCode&&(a.executableCode=c.executableCode),c.codeExecutionResult&&(a.codeExecutionResult=c.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[o].content.parts.push(a)}o++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function it(e,t,n,s){const o=await ue(t,J.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),s);return rn(o)}async function at(e,t,n,s){const r=await(await ue(t,J.GENERATE_CONTENT,e,!1,JSON.stringify(n),s)).json();return{response:Ie(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function de(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return un(t)}function un(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,o=!1;for(const r of e)"functionResponse"in r?(n.parts.push(r),o=!0):(t.parts.push(r),s=!0);if(s&&o)throw new T("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new T("No content is provided for sending chat message.");return s?t:n}function fn(e,t){var n;let s={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new V("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=e.contents}else if(o)s=Object.assign(Object.assign({},s),e.generateContentRequest);else{const r=de(e);s.contents=[r]}return{generateContentRequest:s}}function Be(e){let t;return e.contents?t=e:t={contents:[de(e)]},e.systemInstruction&&(t.systemInstruction=ct(e.systemInstruction)),t}function hn(e){return typeof e=="string"||Array.isArray(e)?{content:de(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],mn={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function pn(e){let t=!1;for(const n of e){const{role:s,parts:o}=n;if(!t&&s!=="user")throw new T(`First content should be with role 'user', got ${s}`);if(!ke.includes(s))throw new T(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(ke)}`);if(!Array.isArray(o))throw new T("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new T("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const c of o)for(const u of Fe)u in c&&(r[u]+=1);const a=mn[s];for(const c of Fe)if(!a.includes(c)&&r[c]>0)throw new T(`Content with role '${s}' can't contain '${c}' part`);t=!0}}function Qe(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze="SILENT_ERROR";class gn{constructor(t,n,s,o={}){this.model=n,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s!=null&&s.history&&(pn(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var s,o,r,a,c,u;await this._sendPromise;const b=de(t),d={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,b]},g=Object.assign(Object.assign({},this._requestOptions),n);let f;return this._sendPromise=this._sendPromise.then(()=>at(this._apiKey,this.model,d,g)).then(m=>{var w;if(Qe(m.response)){this._history.push(b);const C=Object.assign({parts:[],role:"model"},(w=m.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(C)}else{const C=$(m.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}f=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,f}async sendMessageStream(t,n={}){var s,o,r,a,c,u;await this._sendPromise;const b=de(t),d={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(c=this.params)===null||c===void 0?void 0:c.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,b]},g=Object.assign(Object.assign({},this._requestOptions),n),f=it(this._apiKey,this.model,d,g);return this._sendPromise=this._sendPromise.then(()=>f).catch(m=>{throw new Error(ze)}).then(m=>m.response).then(m=>{if(Qe(m)){this._history.push(b);const w=Object.assign({},m.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=$(m);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(m=>{m.message!==ze&&console.error(m)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bn(e,t,n,s){return(await ue(t,J.COUNT_TOKENS,e,!1,JSON.stringify(n),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yn(e,t,n,s){return(await ue(t,J.EMBED_CONTENT,e,!1,JSON.stringify(n),s)).json()}async function xn(e,t,n,s){const o=n.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await ue(t,J.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,n,s={}){this.apiKey=t,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=ct(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var s;const o=Be(t),r=Object.assign(Object.assign({},this._requestOptions),n);return at(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),r)}async generateContentStream(t,n={}){var s;const o=Be(t),r=Object.assign(Object.assign({},this._requestOptions),n);return it(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),r)}startChat(t){var n;return new gn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const s=fn(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return bn(this.apiKey,this.model,s,o)}async embedContent(t,n={}){const s=hn(t),o=Object.assign(Object.assign({},this._requestOptions),n);return yn(this.apiKey,this.model,s,o)}async batchEmbedContents(t,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return xn(this.apiKey,this.model,t,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new T("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Je(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,s){if(!t.name)throw new V("Cached content must contain a `name` field.");if(!t.model)throw new V("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const a of o)if(n!=null&&n[a]&&t[a]&&(n==null?void 0:n[a])!==t[a]){if(a==="model"){const c=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(c===u)continue}throw new V(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${t[a]})`)}const r=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Je(this.apiKey,r,s)}}const wn=async(e,t)=>{const n=new vn("AIzaSyCWfsIuorsBvQG_yLp4hyX5MC6YVZFVbRU"),s=Object.entries(e).filter(([d,g])=>g.status==="completed").map(([d,g])=>{var f;return(f=t.find(m=>m.id===parseInt(d)))==null?void 0:f.title}).filter(Boolean),o=t.filter(d=>{var g;return((g=e[d.id])==null?void 0:g.status)!=="completed"}).map(d=>({id:d.id,title:d.title,category:d.category,difficulty:d.difficulty}));if(o.length===0)return[];const r=`Based on the user's completed content history and the available content, recommend up to 4 items. For each recommendation, provide a brief, engaging, one-sentence reason why the user would like it. User history: [${s.join(", ")}]. Available content: ${JSON.stringify(o)}.`,c=await n.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json"}});return JSON.parse(c.text).map(d=>{const g=t.find(f=>f.id===d.id);return g?{content:g,reason:d.reason}:null}).filter(Boolean)},qe=l.lazy(()=>Y(()=>import("./HomeView-NpTqq68c.js"),__vite__mapDeps([0,1,2,3]))),_n=l.lazy(()=>Y(()=>import("./ThreatIntelView-agj89pyb.js"),__vite__mapDeps([4,1,2,3]))),Cn=l.lazy(()=>Y(()=>import("./LibraryView-BAxIp6vc.js"),__vite__mapDeps([5,1,2,6,3]))),En=l.lazy(()=>Y(()=>import("./PlaylistsView-BN788WuO.js"),__vite__mapDeps([7,1,2,6,3]))),In=l.lazy(()=>Y(()=>import("./ActivityView-yq3GuFuX.js"),__vite__mapDeps([8,1,2,3]))),Nn=l.lazy(()=>Y(()=>import("./AnalyticsView-XF7DYnDK.js"),__vite__mapDeps([9,1,2,10,3,11,12,13,14,15,16]))),Sn=l.lazy(()=>Y(()=>import("./QAView-ClbG8J_G.js"),__vite__mapDeps([17,1,2,3,18]))),Tn=l.lazy(()=>Y(()=>import("./ProfileView-B22IBV8Y.js"),__vite__mapDeps([19,1,2,3]))),Mn=({currentUser:e,organization:t,onLogout:n,theme:s,toggleTheme:o})=>{const[r,a]=l.useState(e),[c,u]=l.useState("Home"),[b,d]=l.useState(!1),[g,f]=l.useState(!0),[m,w]=l.useState([]),[C,E]=l.useState([]),[v,I]=l.useState([]),[D,P]=l.useState([]),[p,R]=l.useState([]),[k,G]=l.useState([]),[Z,ie]=l.useState(null),[X,ee]=l.useState(!0),[H,te]=l.useState(null),[B,F]=l.useState(null),[h,_]=l.useState(!1);l.useEffect(()=>{(async()=>{f(!0);try{const L=r.organization_id,se=L?`or(assigned_org_ids.is.null,assigned_org_ids.eq.{},assigned_org_ids.cs.{${L}})`:"or(assigned_org_ids.is.null,assigned_org_ids.eq.{})",[Q,me,Ne,Se,we]=await Promise.all([O.from("content").select("*").or(se),O.from("playlists").select("*, playlist_content(content_id)").or(se),O.from("news").select("*, author:profiles(name)").order("created_at",{ascending:!1}).limit(5),O.from("qanda").select("*, user:profiles(name, avatar_url), admin:profiles!answered_by(name)").order("created_at",{ascending:!1}),O.from("user_assignments").select("*").eq("user_id",r.id)]);if(Q.data&&w(Q.data),Ne.data&&R(Ne.data.map(z=>({...z,author:z.author||{name:"Unknown"}}))),Se.data&&G(Se.data),me.data){const z=me.data.map(pe=>({...pe,contentIds:pe.playlist_content.map(ge=>ge.content_id)}));E(z)}if(Q.data&&me.data&&we.data){const z=new Set(we.data.filter(S=>S.content_id).map(S=>S.content_id)),pe=new Set(we.data.filter(S=>S.playlist_id).map(S=>S.playlist_id)),ge=(me.data||[]).filter(S=>pe.has(S.id));P(ge.map(S=>({...S,contentIds:S.playlist_content.map(_e=>_e.content_id)}))),ge.forEach(S=>S.playlist_content.forEach(_e=>z.add(_e.content_id))),I(Q.data.filter(S=>z.has(S.id)))}}catch(L){console.error("Error fetching user data:",L)}finally{f(!1)}})();const A=O.channel(`public:profiles:id=eq.${r.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${r.id}`},L=>{a(se=>({...se,...L.new}))}).subscribe();return()=>{O.removeChannel(A)}},[r.id,r.organization_id]);const U=l.useCallback(async()=>{ee(!0),te(null);try{const y=await wn(r.progress||{},m);ie(y)}catch(y){console.error("Error fetching recommendations:",y),te("Could not fetch recommendations at this time.")}finally{ee(!1)}},[r.progress,m]);l.useEffect(()=>{!g&&m.length>0&&U()},[g,m,U]);const ve=l.useCallback(async(y,A)=>{const L={status:"completed",...A!==void 0&&{score:A}},se={...r.progress,[y]:L},{error:Q}=await O.from("profiles").update({progress:se}).eq("id",r.id);Q&&console.error("Error updating progress:",Q)},[r.id,r.progress]),x=y=>{Dt(r,y),u("Threat Intel")},j=y=>F(y),ne=l.useMemo(()=>v[0],[v]),ae=l.useMemo(()=>v.filter(y=>{var A,L;return((L=(A=r.progress)==null?void 0:A[y.id])==null?void 0:L.status)==="in-progress"}),[v,r.progress]),fe=l.useMemo(()=>v.filter(y=>{var A;return!((A=r.progress)!=null&&A[y.id])}),[v,r.progress]),he=(t==null?void 0:t.theme_color)||"var(--primary-color)",lt=[{name:"Home",icon:ft},{name:"Threat Intel",icon:ht},{name:"Library",icon:mt},{name:"Playlists",icon:pt},{name:"My Activity",icon:gt},{name:"My Analytics",icon:bt},{name:"Q&A",icon:yt},{name:"Profile",icon:xt}],dt=()=>{let y;switch(c){case"Home":y=i.jsx(qe,{featuredContent:ne,continueLearning:ae,newContent:fe,recommendations:Z,updates:p,onPlay:j,onNewsRead:x,loading:g,recLoading:X,recError:H,userProgress:r.progress});break;case"Threat Intel":y=i.jsx(_n,{updates:p,onRead:x});break;case"Library":y=i.jsx(Cn,{content:v,onPlay:j,progress:r.progress});break;case"Playlists":y=i.jsx(En,{playlists:D,allContent:m,onPlay:j,progress:r.progress});break;case"My Activity":y=i.jsx(In,{user:r,allContent:m});break;case"My Analytics":y=i.jsx(Nn,{user:r,allContent:m});break;case"Q&A":y=i.jsx(Sn,{userQanda:k.filter(A=>A.user_id===r.id),faqItems:k.filter(A=>A.is_faq),onAsk:()=>_(!0)});break;case"Profile":y=i.jsx(Tn,{user:r,onLogout:n});break;default:y=i.jsx(qe,{featuredContent:ne,continueLearning:ae,newContent:fe,recommendations:Z,updates:p,onPlay:j,onNewsRead:x,loading:g,recLoading:X,recError:H,userProgress:r.progress})}return i.jsx(l.Suspense,{fallback:i.jsxs("div",{className:"flex h-full w-full items-center justify-center",children:["Loading ",c,"..."]}),children:y})};return i.jsxs("div",{className:"flex h-screen bg-background text-text-main",children:[i.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden ${b?"block":"hidden"}`,onClick:()=>d(!1)}),i.jsxs("aside",{className:`w-64 flex-shrink-0 bg-sidebar border-r border-border flex flex-col fixed inset-y-0 left-0 z-30 md:relative md:translate-x-0 transform ${b?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:[i.jsx("div",{className:"h-20 flex items-center justify-center px-4 border-b border-border",children:t!=null&&t.logo_url?i.jsx("img",{src:t.logo_url,alt:t.name,className:"h-10 max-w-full object-contain"}):i.jsx(ut,{className:"text-text-main h-8"})}),i.jsx("nav",{className:"flex-1 p-4 space-y-1",children:lt.map(y=>i.jsxs("button",{onClick:()=>{u(y.name),d(!1)},className:`w-full flex items-center px-4 py-2.5 text-sm font-semibold rounded-lg transition-colors duration-200 ${c===y.name?"text-highlight":"text-text-secondary hover:bg-sidebar-accent hover:text-text-main"}`,style:c===y.name?{color:he}:{},children:[i.jsx(y.icon,{className:"mr-4 h-5 w-5"}),i.jsx("span",{children:y.name})]},y.name))})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("header",{className:"h-20 flex-shrink-0 bg-sidebar/80 backdrop-blur-md border-b border-border flex items-center justify-between px-6",children:[i.jsx("button",{onClick:()=>d(!0),className:"text-text-secondary md:hidden",children:i.jsx(vt,{className:"h-6 w-6"})}),i.jsxs("div",{className:"relative hidden md:block",children:[i.jsx(wt,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary"}),i.jsx("input",{type:"text",placeholder:"Search content...",className:"form-input bg-sidebar-accent pl-10 w-64 !py-2"})]}),i.jsx(_t,{user:r,onLogout:n,onProfileClick:()=>u("Profile"),theme:s,toggleTheme:o})]}),i.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:dt()})]}),B&&i.jsx(Yt,{isOpen:!!B,onClose:()=>F(null),content:B,user:r,onProgressUpdate:ve}),i.jsx(Ht,{isOpen:h,onClose:()=>_(!1),currentUser:r})]})};export{Mn as default};
