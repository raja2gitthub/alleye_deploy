import{r as l,j as d,B as ue}from"./index-EZVcE4NK.js";import{D as pe,C as me}from"./CustomTooltip-B3-FOGSn.js";import{G as he}from"./Gauge-BOsIat0P.js";import{K,M as B,N as H,O as Q,Q as ve,bR as fe,bb as G,bc as xe,V as U,W as V,U as ye,r as q,D as ge,o as J,X as be,Y as Ae,_ as Ie,$ as Pe,b2 as Ce,a0 as Ee,a1 as ee,a3 as je,bS as ke,u as Se,a2 as Ne,c as De,a4 as we,Z as Oe,L as T,a5 as X,a6 as F,i as L,a8 as Le,a9 as Re,aa as w,a7 as We,b7 as Te,ab as _e,ac as Me,x as ae,ad as ze,aM as z,b1 as _,ae as Ke,R as Be,T as Ge}from"./CategoricalChart-DwX3OCgn.js";import{u as Ve,G as Xe,b as Fe}from"./CartesianChart-DXJYFoJy.js";import{X as Ye}from"./XAxis-Bu-EbL_O.js";import{A as Y,D as $e}from"./ActivePoints-DLfukH-g.js";import{g as Ze}from"./getRadiusAndStrokeWidthFromDot-NW7TPI2l.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";import"./PieChart-Qk7a3gMm.js";import"./PolarChart-DFVWZZVg.js";var te=(a,e,t,r)=>H(a,"xAxis",e,r),re=(a,e,t,r)=>Q(a,"xAxis",e,r),ie=(a,e,t,r)=>H(a,"yAxis",t,r),ne=(a,e,t,r)=>Q(a,"yAxis",t,r),He=K([B,te,ie,re,ne],(a,e,t,r,s)=>U(a,"xAxis")?V(e,r,!1):V(t,s,!1)),Qe=(a,e,t,r,s)=>s,se=K([ye,Qe],(a,e)=>a.filter(t=>t.type==="area").find(t=>t.id===e)),Ue=(a,e,t,r,s)=>{var i,o=se(a,e,t,r,s);if(o!=null){var n=B(a),c=U(n,"xAxis"),u;if(c?u=G(a,"yAxis",t,r):u=G(a,"xAxis",e,r),u!=null){var{stackId:x}=o,g=xe(o);if(!(x==null||g==null)){var v=(i=u[x])===null||i===void 0?void 0:i.stackedData;return v==null?void 0:v.find(h=>h.key===g)}}}},qe=K([B,te,ie,re,ne,Ue,ve,He,se,fe],(a,e,t,r,s,i,o,n,c,u)=>{var{chartData:x,dataStartIndex:g,dataEndIndex:v}=o;if(!(c==null||a!=="horizontal"&&a!=="vertical"||e==null||t==null||r==null||s==null||r.length===0||s.length===0||n==null)){var{data:h}=c,f;if(h&&h.length>0?f=h:f=x==null?void 0:x.slice(g,v+1),f!=null)return xa({layout:a,xAxis:e,yAxis:t,xAxisTicks:r,yAxisTicks:s,dataStartIndex:g,areaSettings:c,stackedData:i,displayedData:f,chartBaseValue:u,bandSize:n})}}),Je=["id"],ea=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function D(){return D=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},D.apply(null,arguments)}function le(a,e){if(a==null)return{};var t,r,s=aa(a,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(a,t)&&(s[t]=a[t])}return s}function aa(a,e){if(a==null)return{};var t={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(e.indexOf(r)!==-1)continue;t[r]=a[r]}return t}function $(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),t.push.apply(t,r)}return t}function O(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$(Object(t),!0).forEach(function(r){ta(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function ta(a,e,t){return(e=ra(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function ra(a){var e=ia(a,"string");return typeof e=="symbol"?e:e+""}function ia(a,e){if(typeof a!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function M(a,e){return a&&a!=="none"?a:e}var na=a=>{var{dataKey:e,name:t,stroke:r,fill:s,legendType:i,hide:o}=a;return[{inactive:o,dataKey:e,type:i,color:M(r,s),value:ee(t,e),payload:a}]};function sa(a){var{dataKey:e,data:t,stroke:r,strokeWidth:s,fill:i,name:o,hide:n,unit:c}=a;return{dataDefinedOnItem:t,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:ee(o,e),hide:n,type:a.tooltipType,color:M(r,i),unit:c}}}function la(a){var{clipPathId:e,points:t,props:r}=a,{needClip:s,dot:i,dataKey:o}=r,n=ae(r);return l.createElement($e,{points:t,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:n,needClip:s,clipPathId:e})}function oa(a){var{showLabels:e,children:t,points:r}=a,s=r.map(i=>{var o,n,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(n=i.y)!==null&&n!==void 0?n:0,width:0,lowerWidth:0,upperWidth:0,height:0};return O(O({},c),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return l.createElement(Me,{value:e?s:void 0},t)}function Z(a){var{points:e,baseLine:t,needClip:r,clipPathId:s,props:i}=a,{layout:o,type:n,stroke:c,connectNulls:u,isRange:x}=i,{id:g}=i,v=le(i,Je),h=ae(v),f=ze(v);return l.createElement(l.Fragment,null,(e==null?void 0:e.length)>1&&l.createElement(T,{clipPath:r?"url(#clipPath-".concat(s,")"):void 0},l.createElement(z,D({},f,{id:g,points:e,connectNulls:u,type:n,baseLine:t,layout:o,stroke:"none",className:"recharts-area-area"})),c!=="none"&&l.createElement(z,D({},h,{className:"recharts-area-curve",layout:o,type:n,connectNulls:u,fill:"none",points:e})),c!=="none"&&x&&l.createElement(z,D({},h,{className:"recharts-area-curve",layout:o,type:n,connectNulls:u,fill:"none",points:t}))),l.createElement(la,{points:e,props:v,clipPathId:s}))}function ca(a){var{alpha:e,baseLine:t,points:r,strokeWidth:s}=a,i=r[0].y,o=r[r.length-1].y;if(!_(i)||!_(o))return null;var n=e*Math.abs(i-o),c=Math.max(...r.map(u=>u.x||0));return L(t)?c=Math.max(t,c):t&&Array.isArray(t)&&t.length&&(c=Math.max(...t.map(u=>u.x||0),c)),L(c)?l.createElement("rect",{x:0,y:i<o?i:i-n,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(n)}):null}function da(a){var{alpha:e,baseLine:t,points:r,strokeWidth:s}=a,i=r[0].x,o=r[r.length-1].x;if(!_(i)||!_(o))return null;var n=e*Math.abs(i-o),c=Math.max(...r.map(u=>u.y||0));return L(t)?c=Math.max(t,c):t&&Array.isArray(t)&&t.length&&(c=Math.max(...t.map(u=>u.y||0),c)),L(c)?l.createElement("rect",{x:i<o?i:i-n,y:0,width:n,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function ua(a){var{alpha:e,layout:t,points:r,baseLine:s,strokeWidth:i}=a;return t==="vertical"?l.createElement(ca,{alpha:e,points:r,baseLine:s,strokeWidth:i}):l.createElement(da,{alpha:e,points:r,baseLine:s,strokeWidth:i})}function pa(a){var{needClip:e,clipPathId:t,props:r,previousPointsRef:s,previousBaselineRef:i}=a,{points:o,baseLine:n,isAnimationActive:c,animationBegin:u,animationDuration:x,animationEasing:g,onAnimationStart:v,onAnimationEnd:h}=r,f=Le(r,"recharts-area-"),[A,b]=l.useState(!1),E=!A,P=l.useCallback(()=>{typeof h=="function"&&h(),b(!1)},[h]),C=l.useCallback(()=>{typeof v=="function"&&v(),b(!0)},[v]),p=s.current,y=i.current;return l.createElement(oa,{showLabels:E,points:o},r.children,l.createElement(Re,{animationId:f,begin:u,duration:x,isActive:c,easing:g,onAnimationEnd:P,onAnimationStart:C,key:f},m=>{if(p){var k=p.length/o.length,W=m===1?o:o.map((I,R)=>{var S=Math.floor(R*k);if(p[S]){var N=p[S];return O(O({},I),{},{x:w(N.x,I.x,m),y:w(N.y,I.y,m)})}return I}),j;return L(n)?j=w(y,n,m):We(n)||Te(n)?j=w(y,0,m):j=n.map((I,R)=>{var S=Math.floor(R*k);if(Array.isArray(y)&&y[S]){var N=y[S];return O(O({},I),{},{x:w(N.x,I.x,m),y:w(N.y,I.y,m)})}return I}),m>0&&(s.current=W,i.current=j),l.createElement(Z,{points:W,baseLine:j,needClip:e,clipPathId:t,props:r})}return m>0&&(s.current=o,i.current=n),l.createElement(T,null,c&&l.createElement("defs",null,l.createElement("clipPath",{id:"animationClipPath-".concat(t)},l.createElement(ua,{alpha:m,points:o,baseLine:n,layout:r.layout,strokeWidth:r.strokeWidth}))),l.createElement(T,{clipPath:"url(#animationClipPath-".concat(t,")")},l.createElement(Z,{points:o,baseLine:n,needClip:e,clipPathId:t,props:r})))}),l.createElement(_e,{label:r.label}))}function ma(a){var{needClip:e,clipPathId:t,props:r}=a,s=l.useRef(null),i=l.useRef();return l.createElement(pa,{needClip:e,clipPathId:t,props:r,previousPointsRef:s,previousBaselineRef:i})}class ha extends l.PureComponent{render(){var{hide:e,dot:t,points:r,className:s,top:i,left:o,needClip:n,xAxisId:c,yAxisId:u,width:x,height:g,id:v,baseLine:h,zIndex:f}=this.props;if(e)return null;var A=De("recharts-area",s),b=v,{r:E,strokeWidth:P}=Ze(t),C=we(t),p=E*2+P;return l.createElement(Oe,{zIndex:f},l.createElement(T,{className:A},n&&l.createElement("defs",null,l.createElement(Xe,{clipPathId:b,xAxisId:c,yAxisId:u}),!C&&l.createElement("clipPath",{id:"clipPath-dots-".concat(b)},l.createElement("rect",{x:o-p/2,y:i-p/2,width:x+p,height:g+p}))),l.createElement(ma,{needClip:n,clipPathId:b,props:this.props})),l.createElement(Y,{points:r,mainColor:M(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(h)&&l.createElement(Y,{points:h,mainColor:M(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var oe={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Ee.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:ge.area};function va(a){var e,t=q(a,oe),{activeDot:r,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:n,dot:c,fill:u,fillOpacity:x,hide:g,isAnimationActive:v,legendType:h,stroke:f,xAxisId:A,yAxisId:b}=t,E=le(t,ea),P=je(),C=ke(),{needClip:p}=Ve(A,b),y=J(),{points:m,isRange:k,baseLine:W}=(e=Se(de=>qe(de,A,b,y,a.id)))!==null&&e!==void 0?e:{},j=Ne();if(P!=="horizontal"&&P!=="vertical"||j==null||C!=="AreaChart"&&C!=="ComposedChart")return null;var{height:I,width:R,x:S,y:N}=j;return!m||!m.length?null:l.createElement(ha,D({},E,{activeDot:r,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:W,connectNulls:n,dot:c,fill:u,fillOpacity:x,height:I,hide:g,layout:P,isAnimationActive:v,isRange:k,legendType:h,needClip:p,points:m,stroke:f,width:R,left:S,top:N,xAxisId:A,yAxisId:b}))}var fa=(a,e,t,r,s)=>{var i=t??e;if(L(i))return i;var o=a==="horizontal"?s:r,n=o.scale.domain();if(o.type==="number"){var c=Math.max(n[0],n[1]),u=Math.min(n[0],n[1]);return i==="dataMin"?u:i==="dataMax"||c<0?c:Math.max(Math.min(n[0],n[1]),0)}return i==="dataMin"?n[0]:i==="dataMax"?n[1]:n[0]};function xa(a){var{areaSettings:{connectNulls:e,baseValue:t,dataKey:r},stackedData:s,layout:i,chartBaseValue:o,xAxis:n,yAxis:c,displayedData:u,dataStartIndex:x,xAxisTicks:g,yAxisTicks:v,bandSize:h}=a,f=s&&s.length,A=fa(i,o,t,n,c),b=i==="horizontal",E=!1,P=u.map((p,y)=>{var m;f?m=s[x+y]:(m=X(p,r),Array.isArray(m)?E=!0:m=[A,m]);var k=m[1]==null||f&&!e&&X(p,r)==null;return b?{x:F({axis:n,ticks:g,bandSize:h,entry:p,index:y}),y:k?null:c.scale(m[1]),value:m,payload:p}:{x:k?null:n.scale(m[1]),y:F({axis:c,ticks:v,bandSize:h,entry:p,index:y}),value:m,payload:p}}),C;return f||E?C=P.map(p=>{var y=Array.isArray(p.value)?p.value[0]:null;return b?{x:p.x,y:y!=null&&p.y!=null?c.scale(y):null,payload:p.payload}:{x:y!=null?n.scale(y):null,y:p.y,payload:p.payload}}):C=b?c.scale(A):n.scale(A),{points:P,baseLine:C,isRange:E}}function ya(a){var e=q(a,oe),t=J();return l.createElement(be,{id:e.id,type:"area"},r=>l.createElement(l.Fragment,null,l.createElement(Ae,{legendPayload:na(e)}),l.createElement(Ie,{fn:sa,args:e}),l.createElement(Pe,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Ce(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:t,connectNulls:e.connectNulls}),l.createElement(va,D({},e,{id:r}))))}var ce=l.memo(ya);ce.displayName="Area";var ga=["axis"],ba=l.forwardRef((a,e)=>l.createElement(Fe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ga,tooltipPayloadSearcher:Ke,categoricalChartProps:a,ref:e}));const Aa=a=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",strokeWidth:1.5,stroke:"currentColor",...a,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286z"})}),La=({data:a,onDownload:e,onInsightClick:t})=>d.jsx(pe,{title:"Governance & Compliance",subtitle:"Demonstrate readiness to auditors and the board",icon:Aa,onInsightClick:()=>t("Governance & Compliance"),children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-text-secondary mb-2",children:"Control Coverage Completion"}),d.jsxs("table",{className:"w-full text-xs text-left",children:[d.jsx("thead",{className:"text-text-secondary uppercase",children:d.jsxs("tr",{children:[d.jsx("th",{className:"py-1 font-normal",children:"Control"}),d.jsx("th",{className:"py-1 font-normal text-right",children:"Rate"})]})}),d.jsx("tbody",{children:a.compliance.controlCoverage.map(r=>d.jsxs("tr",{className:"border-t border-border",children:[d.jsx("td",{className:"py-1.5 text-text-main",children:r.control}),d.jsxs("td",{className:"py-1.5 font-semibold text-right text-highlight",children:[r.rate.toFixed(0),"%"]})]},r.control))})]}),d.jsx(ue,{variant:"secondary",size:"sm",className:"w-full mt-4",onClick:e,children:"Download Evidence Pack"})]}),d.jsxs("div",{className:"flex flex-col justify-between",children:[d.jsx("div",{className:"h-28",children:d.jsx(he,{value:a.compliance.auditReadiness,label:"Audit Readiness Score"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-text-secondary mb-1",children:"Quarterly Alignment Trend"}),d.jsx(Be,{width:"100%",height:100,children:d.jsxs(ba,{data:a.compliance.alignmentTrend,children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorCompliance",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"5%",stopColor:"var(--secondary-color)",stopOpacity:.8}),d.jsx("stop",{offset:"95%",stopColor:"var(--secondary-color)",stopOpacity:0})]})}),d.jsx(Ye,{dataKey:"q",tick:{fill:"var(--text-secondary-color)",fontSize:10},axisLine:!1,tickLine:!1}),d.jsx(Ge,{content:d.jsx(me,{})}),d.jsx(ce,{type:"monotone",dataKey:"value",stroke:"var(--secondary-color)",fill:"url(#colorCompliance)",name:"Avg Completion %"})]})})]})]})]})});export{La as default};
